version: 2
jobs:
  build:
    branches:
      only:
        - master
    docker:
      - image: circleci/node:9
    steps:
      - checkout
      - run: ./cicd/setup_aws_credentials.sh
      - run: yarn install
      - run: yarn build
      - run: aws s3 sync build s3://dataworld-vegaliteexplorer-us-east-1 --acl public-read
